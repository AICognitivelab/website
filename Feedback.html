<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Form - AI Powered Digital Solutions</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font import - Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* Changed: Back to white background for the body */
            color: #2d3748; /* Darker text for better contrast */
            display: flex; /* Use flexbox for centering */
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Full viewport height */
            padding: 2rem; /* Padding around the form container */
            box-sizing: border-box; /* Include padding in element's total width and height */
        }
        .container {
            max-width: 800px; /* Max width for the survey form */
            margin: 0 auto;
            padding: 2rem;
        }
        .section-heading {
            font-weight: 900; /* Even bolder */
            color: #1a202c; /* Very dark for headings */
        }
        .form-input, .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: #334155;
            background-color: #ffffff; /* Ensure background is white */
        }
        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 1rem;
            color: #334155;
            min-height: 100px;
            resize: vertical;
        }
        .submit-button {
            background-color: #f59e0b; /* Changed: Orange background for submit button */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease-in-out;
            cursor: pointer;
        }
        .submit-button:hover {
            background-color: #d97706; /* Changed: Darker orange on hover for submit button */
        }

        /* Styles for radio buttons */
        .form-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            vertical-align: middle;
            background-color: #ffffff;
            border: 1px solid #cbd5e1;
            border-radius: 50%;
            cursor: pointer;
            width: 1.25rem; /* Equivalent to w-5 */
            height: 1.25rem; /* Equivalent to h-5 */
            transition: border-color 0.15s ease-in-out, background-color 0.15s ease-in-out;
        }
        .form-radio:checked {
            background-color: #f59e0b; /* Changed: Orange for checked radio button */
            border-color: #f59e0b; /* Changed: Orange border for checked radio button */
            position: relative;
        }
        .form-radio:checked::after {
            content: '';
            display: block;
            width: 0.5rem; /* Smaller inner dot */
            height: 0.5rem;
            border-radius: 50%;
            background-color: #ffffff; /* White dot */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .form-radio:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.4); /* Changed: Orange focus ring color */
        }

        /* Custom message box */
        .message-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .message-box-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .message-box-content {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            text-align: center;
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out;
        }
        .message-box-overlay.show .message-box-content { /* Corrected selector for animation */
            transform: translateY(0);
        }
        .message-box-button {
            background-color: #4f46e5;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            margin-top: 1.5rem;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out;
        }
        .message-box-button:hover {
            background-color: #4338ca;
        }

        /* Loading Spinner Styles */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1002;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .spinner {
            border: 8px solid #f3f3f3; /* Light grey */
            border-top: 8px solid #4f46e5; /* Blue */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container bg-white p-8 sm:p-10 rounded-3xl shadow-xl border border-indigo-200">
        <h2 class="text-4xl sm:text-5xl section-heading mb-6 text-center text-orange-600">Feedback Form</h2>
        <p class="text-gray-700 mb-8 text-center leading-relaxed">
            We value your opinion! Please take a moment to provide feedback on the services you received. Your insights help us to continuously improve.
        </p>

        <form id="feedbackForm" class="space-y-6">
            <!-- IMPORTANT: This access_key is crucial for Web3Forms to route your submissions -->
            <input type="hidden" name="access_key" value="d4b3c183-518e-40a6-8e94-7da7fbedbbb5">
            <!-- Hidden field to capture the submission date -->
            <input type="hidden" name="submissionDate" id="submissionDate">

            <!-- Question 1: Overall Satisfaction -->
            <div>
                <label class="block text-gray-700 text-sm sm:text-base font-medium mb-2">1. Overall, how satisfied are you with the solution we delivered?</label>
                <div class="flex flex-wrap gap-x-6 gap-y-3 justify-center sm:justify-start">
                    <label class="inline-flex items-center">
                        <input type="radio" name="overallSatisfaction" value="Very Satisfied" class="form-radio" required>
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Very Satisfied</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="overallSatisfaction" value="Satisfied" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Satisfied</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="overallSatisfaction" value="Neutral" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Neutral</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="overallSatisfaction" value="Dissatisfied" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Dissatisfied</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="overallSatisfaction" value="Very Dissatisfied" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Very Dissatisfied</span>
                    </label>
                </div>
            </div>

            <!-- Question 2: Quality of services provided -->
            <div>
                <label class="block text-gray-700 text-sm sm:text-base font-medium mb-2">2. How would you rate the quality of services provided?</label>
                <div class="flex flex-wrap gap-x-6 gap-y-3 justify-center sm:justify-start">
                    <label class="inline-flex items-center">
                        <input type="radio" name="serviceQuality" value="Excellent" class="form-radio" required>
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Excellent</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="serviceQuality" value="Good" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Good</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="serviceQuality" value="Fair" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Fair</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="serviceQuality" value="Poor" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Poor</span>
                    </label>
                </div>
            </div>

            <!-- Question 3: Timeliness of service delivery -->
            <div>
                <label class="block text-gray-700 text-sm sm:text-base font-medium mb-2">3. How satisfied were you with timeliness of service delivery?</label>
                <div class="flex flex-wrap gap-x-6 gap-y-3 justify-center sm:justify-start">
                    <label class="inline-flex items-center">
                        <input type="radio" name="timeliness" value="Very Satisfied" class="form-radio" required>
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Very Satisfied</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="timeliness" value="Satisfied" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Satisfied</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="timeliness" value="Neutral" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Neutral</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="timeliness" value="Dissatisfied" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Dissatisfied</span>
                    </label>
                </div>
            </div>

            <!-- Question 4: Would you recommend us? -->
            <div>
                <label class="block text-gray-700 text-sm sm:text-base font-medium mb-2">4. Would you recommend our services to others?</label>
                <div class="flex flex-wrap gap-x-6 gap-y-3 justify-center sm:justify-start">
                    <label class="inline-flex items-center">
                        <input type="radio" name="recommend" value="Yes" class="form-radio" required>
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="recommend" value="No" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">No</span>
                    </label>
                </div>
            </div>

            <!-- Question 5: Did our services meet your expectations? -->
            <div>
                <label class="block text-gray-700 text-sm sm:text-base font-medium mb-2">5. Did our services meet your expectations?</label>
                <div class="flex flex-wrap gap-x-6 gap-y-3 justify-center sm:justify-start">
                    <label class="inline-flex items-center">
                        <input type="radio" name="metExpectations" value="Yes" class="form-radio" required>
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">Yes</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="metExpectations" value="No" class="form-radio">
                        <span class="ml-2 text-gray-800 text-sm sm:text-base">No</span>
                    </label>
                </div>
            </div>

            <!-- Comment Box -->
            <div>
                <label for="comments" class="block text-gray-700 text-sm sm:text-base font-medium mb-1">Comments</label>
                <textarea id="comments" name="comments" class="form-textarea" placeholder="Please share detailed feedback and suggestions." required></textarea>
            </div>

            <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

            <div class="text-center">
                <button type="submit" class="submit-button">Submit</button>
            </div>
        </form>
    </div>

    <!-- Message Box and Loading Overlay for form submission feedback -->
    <div id="messageBox" class="message-box-overlay">
        <div class="message-box-content">
            <h3 class="text-2xl section-heading mb-4 text-green-600" id="messageTitle"></h3>
            <p id="messageBoxText" class="text-gray-700"></p>
            <button class="message-box-button" id="closeMessageBoxButton">Close</button>
        </div>
    </div>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <script>
        const feedbackForm = document.getElementById('feedbackForm');
        const submissionDateInput = document.getElementById('submissionDate'); // Get the new hidden date input
        const messageBox = document.getElementById('messageBox');
        const messageTitle = document.getElementById('messageTitle');
        const messageBoxText = document.getElementById('messageBoxText');
        const closeMessageBoxButton = document.getElementById('closeMessageBoxButton');
        const loadingOverlay = document.getElementById('loadingOverlay');

        // Function to set today's date in 'mmm-dd-yyyy' format
        function setTodayDate() {
            const today = new Date();
            const options = { month: 'short', day: '2-digit', year: 'numeric' };
            const formattedDateParts = today.toLocaleDateString('en-US', options).split(' ');
            const month = formattedDateParts[0];
            const day = formattedDateParts[1].replace(',', '');
            const year = formattedDateParts[2];
            submissionDateInput.value = `${month}-${day}-${year}`;
        }

        // Call this function when the page loads to set the date
        setTodayDate();

        // Function to display the message box
        function showMessageBox(title, message, type = 'success') {
            messageTitle.textContent = title;
            messageBoxText.innerHTML = message; // Use innerHTML to allow for HTML tags if needed

            // Set title color based on message type
            if (type === 'success') {
                messageTitle.classList.remove('text-red-600');
                messageTitle.classList.add('text-green-600');
            } else if (type === 'error') {
                messageTitle.classList.remove('text-green-600');
                messageTitle.classList.add('text-red-600');
            } else {
                // Default or neutral color if needed
                messageTitle.classList.remove('text-red-600', 'text-green-600');
                messageTitle.classList.add('text-gray-800');
            }

            messageBox.classList.add('show');
        }

        // Function to show/hide loading overlay
        function showLoadingOverlay() {
            loadingOverlay.classList.add('show');
        }

        function hideLoadingOverlay() {
            loadingOverlay.classList.remove('show');
        }

        // Event listener for closing the message box
        closeMessageBoxButton.addEventListener('click', function() {
            messageBox.classList.remove('show');
        });

        // Event listener for form submission
        feedbackForm.addEventListener('submit', async function(e) {
            e.preventDefault(); // Prevent default form submission

            showLoadingOverlay(); // Show loading spinner

            const formData = new FormData(feedbackForm);
            const object = {};
            formData.forEach((value, key) => {
                // Exclude 'botcheck' field from the object sent to Web3Forms if it's for anti-spam
                if (key !== 'botcheck') {
                    object[key] = value;
                }
            });

            try {
                const response = await fetch("https://api.web3forms.com/submit", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        "Accept": "application/json"
                    },
                    body: JSON.stringify(object)
                });

                hideLoadingOverlay(); // Hide loading spinner

                if (response.ok) {
                    // Success message
                    showMessageBox("Thank You!", "Your feedback has been submitted successfully! We appreciate your insights.", 'success');
                    feedbackForm.reset(); // Clear the form after successful submission
                    setTodayDate(); // Re-set the date for a potential new submission
                } else {
                    // Error message
                    const errorData = await response.json();
                    console.error("Feedback form submission error:", errorData);
                    showMessageBox("Error!", errorData.message || "Something went wrong while submitting feedback. Please try again.", 'error');
                }
            } catch (error) {
                // Network or other unexpected errors
                hideLoadingOverlay();
                console.error("Feedback form submission failed:", error);
                showMessageBox("Error!", "Unable to submit feedback. Please check your internet connection and try again.", 'error');
            }
        });
    </script>
</body>
</html>